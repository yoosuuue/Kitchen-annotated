<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 온라인 책</title>
    <style>
        body {
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .container {
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
        }
        
        .page {
            background-color: white;
            padding: 0;
            overflow: hidden;
        }

        .page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>

    <div id="book"></div>

    <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const bookElement = document.getElementById('book');
            const totalPages = 165; // 전체 페이지 수 설정
            
            // 1. HTML을 자동으로 생성해서 넣기 (1.jpg ~ 165.jpg)
            for (let i = 1; i <= totalPages; i++) {
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page';
                
                // 이미지 태그 생성
                const img = document.createElement('img');
                img.src = `./images/${i}.jpg`; // 이미지 경로: images/1.jpg, images/2.jpg...
                img.alt = `${i}페이지`;
                img.loading = "lazy"; // *중요* 화면에 보일 때만 로딩하여 속도 향상
                
                pageDiv.appendChild(img);
                bookElement.appendChild(pageDiv);
            }

            // 2. 페이지 플립 라이브러리 실행
            const pageFlip = new St.PageFlip(bookElement, {
                width: 848,  // 요청하신 너비
                height: 1200, // 요청하신 높이
                size: 'stretch', // 창 크기에 맞춰 유연하게 조절 (반응형)
                minWidth: 300,
                maxWidth: 1000,
                minHeight: 400,
                maxHeight: 1500,
                showCover: true,
                maxShadowOpacity: 0.5
            });

            // 생성된 페이지들을 라이브러리에 등록
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));
        });
    </script>
</body>
</html>